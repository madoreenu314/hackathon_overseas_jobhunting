<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap" rel="stylesheet">
    <title>海外転職ナレッジ - 投稿一覧</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- ヘッダー -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <span class="logo-icon">🌏</span>
                <span class="logo-text">海外転職ナレッジ</span>
            </div>
            <nav class="user-menu">
                <button class="btn btn-secondary" onclick="location.href='index.html'">ホーム</button>
                <button class="btn btn-primary" id="settings-button" onclick="location.href='settings.html'">設定</button>
            </nav>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <main class="container">
        <!-- フィルター状態表示 -->
        <section class="filter-status">
            <div class="filter-status-content">
                <div class="filter-status-text">
                    <span class="filter-status-icon">🔍</span>
                    <span id="filter-status-message">すべての投稿を表示中</span>
                </div>
                <button class="btn btn-secondary btn-sm" onclick="location.href='settings.html'">
                    フィルターを変更
                </button>
            </div>
            <!-- 選択中のフィルタータグ表示 -->
            <div class="active-filters" id="active-filters"></div>
        </section>

        <!-- 投稿リスト -->
        <section class="posts-section">
            <div class="posts-header">
                <h2 class="posts-title">投稿一覧</h2>
                <div class="posts-sort">
                    <select class="sort-select" id="sort-select">
                        <option value="latest">新着順</option>
                        <option value="popular">人気順</option>
                        <option value="oldest">古い順</option>
                    </select>
                </div>
            </div>

            <!-- 投稿カードが表示される場所（バックエンドが投稿データを読み込んで表示） -->
            <div class="posts-list" id="posts-list">
                <div class="loading">投稿を読み込んでいます...</div>
            </div>

            <!-- 投稿がない場合 -->
            <div class="no-posts" id="no-posts" style="display: none;">
                <p>😔 条件に合う投稿が見つかりませんでした。</p>
                <p>フィルター条件を変更してみてください。</p>
                <button class="btn btn-primary" onclick="location.href='settings.html'" style="margin-top: 1rem;">
                    フィルター設定を変更
                </button>
            </div>
        </section>
    </main>

    <!-- 新規投稿ボタン（フローティング） -->
    <button class="fab-button" id="new-post-btn" title="新規投稿">
        <span class="fab-icon">+</span>
    </button>

    <!-- 新規投稿モーダル -->
    <div class="modal" id="post-modal" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3>新規投稿</h3>
                <button class="modal-close" id="post-modal-close" aria-label="閉じる">×</button>
            </div>
            <div class="modal-body">
                <form id="post-form">
                    <div class="form-group">
                        <label class="form-label" for="post-title">タイトル</label>
                        <input type="text" id="post-title" class="form-input" maxlength="200" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="post-knowledge-type">知見の種類</label>
                        <select id="post-knowledge-type" class="form-input" required>
                            <option value="" disabled selected>選択してください</option>
                            <option value="住居">住居</option>
                            <option value="職業">職業</option>
                            <option value="ビザ">ビザ</option>
                            <option value="生活コスト">生活コスト</option>
                            <option value="文化">文化</option>
                            <option value="教育">教育</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="post-content">内容</label>
                        <textarea id="post-content" class="form-input" rows="6" maxlength="20000" required></textarea>
                    </div>
                    <div class="auth-actions">
                        <button type="submit" class="btn btn-primary">投稿する</button>
                        <button type="button" class="btn btn-reset" id="post-cancel">キャンセル</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- JavaScript読み込み -->
    <script src="js/main.js"></script>
</body>
</html>
